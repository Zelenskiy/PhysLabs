<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ6 - –ó–≤—É–∫–æ–≤—ñ –∫–æ–ª–∏–≤–∞–Ω–Ω—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .section h3 {
            color: #764ba2;
            margin: 20px 0 10px 0;
            font-size: 1.2em;
        }

        .theory-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #e0e0e0;
        }

        .formula {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 15px 0;
            font-size: 1.2em;
            border: 2px solid #ffc107;
        }

        .note-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .note-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: center;
        }

        .note-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        .note-table tr:hover {
            background: #f0f0f0;
        }

        .oscilloscope-section {
            background: #1a1a2e;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .canvas-wrapper {
            position: relative;
            background: #1a1a2e;
            border-radius: 10px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            margin-bottom: 15px;
        }

        canvas {
            width: 100%;
            height: 350px;
            display: block;
            cursor: crosshair;
        }

        .time-scale {
            background: #2d2d44;
            color: #00ff88;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            display: flex;
            justify-content: space-between;
            border-radius: 0 0 10px 10px;
        }

        .scrollbar-container {
            background: #2d2d44;
            padding: 10px;
            border-radius: 0 0 10px 10px;
            margin-top: -5px;
        }

        .custom-scrollbar {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #1a1a2e;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .custom-scrollbar::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 60px;
            height: 16px;
            border-radius: 8px;
            background: #00ff88;
            cursor: grab;
            box-shadow: 0 2px 8px rgba(0, 255, 136, 0.4);
        }

        .custom-scrollbar::-webkit-slider-thumb:active {
            cursor: grabbing;
            background: #00dd77;
        }

        .custom-scrollbar::-moz-range-thumb {
            width: 60px;
            height: 16px;
            border-radius: 8px;
            background: #00ff88;
            cursor: grab;
            border: none;
            box-shadow: 0 2px 8px rgba(0, 255, 136, 0.4);
        }

        .custom-scrollbar::-moz-range-thumb:active {
            cursor: grabbing;
            background: #00dd77;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            font-size: 13px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #757F9A 0%, #D7DDE8 100%);
            color: #333;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 5px;
        }

        .status.recording {
            background: #fff3cd;
            color: #856404;
            animation: pulse 1s infinite;
        }

        .status.active {
            background: #d4edda;
            color: #155724;
        }

        .status.inactive {
            background: #f8d7da;
            color: #721c24;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin: 10px 0;
        }

        .zoom-slider {
            width: 200px;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
        }

        .zoom-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .measurements {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #2e7d32;
        }

        .info-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .info-box strong {
            color: #856404;
        }

        .experiment-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .experiment-table th {
            background: #764ba2;
            color: white;
            padding: 12px;
            text-align: center;
        }

        .experiment-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        .experiment-table input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
        }

        .instruction-list {
            background: white;
            padding: 15px 15px 15px 35px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .instruction-list li {
            margin: 10px 0;
            line-height: 1.6;
        }

        .tool-link {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        .tool-link:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }

        .student {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .student h2 {
            color: #667eea;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .txt_inp {
            width: 100%;
            padding: 12px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .txt_inp:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .submit_block {
            text-align: center;
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
        }

        .submit_block button {
            background: white;
            color: #667eea;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit_block button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .submit_block button:active {
            transform: translateY(-1px);
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            button, .tool-link {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîä –õ–ê–ë–û–†–ê–¢–û–†–ù–ê –†–û–ë–û–¢–ê ‚Ññ 6</h1>
            <p>–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –∑–≤—É–∫–æ–≤–∏—Ö –∫–æ–ª–∏–≤–∞–Ω—å —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª –∑–≤—É–∫—É</p>
        </div>

        <div class="content">
            <input type="text" id="sheetName" hidden value="–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –∑–≤—É–∫–æ–≤–∏—Ö –∫–æ–ª–∏–≤–∞–Ω—å">

            <div class="student">
                <h2>–í–ø–∏—à—ñ—Ç—å –≤–∞—à –∫–ª–∞—Å</h2>
                <div><input class="txt_inp" placeholder="–ö–ª–∞—Å" id="klas" type="text"></div>
            </div>

            <div class="student">
                <h2>–í–ø–∏—à—ñ—Ç—å –≤–∞—à–µ –ø—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ —ñ–º'—è</h2>
                <div><input class="txt_inp" placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ, —ñ–º'—è" id="name" type="text"></div>
            </div>

            <!-- –ú–µ—Ç–∞ —Ç–∞ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è -->
            <div class="section">
                <h2>üìã –ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏</h2>
                <p>–ó'—è—Å—É–≤–∞—Ç–∏ –∑–≤'—è–∑–æ–∫ –º—ñ–∂ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –∑–≤—É–∫–æ–≤–æ—ó —Ö–≤–∏–ª—ñ (–∞–º–ø–ª—ñ—Ç—É–¥–∞, —á–∞—Å—Ç–æ—Ç–∞) —Ç–∞ –≥—É—á–Ω—ñ—Å—Ç—é –π –≤–∏—Å–æ—Ç–æ—é —Ç–æ–Ω—É –∑–≤—É–∫—É.</p>
                
                <h3>–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è:</h3>
                <ul class="instruction-list">
                    <li>–ö–æ–º–ø'—é—Ç–µ—Ä –∞–±–æ –º–æ–±—ñ–ª—å–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –∑ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–æ–º</li>
                    <li>–¶–µ–π –≤–µ–±-–¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –∑–∞–ø–∏—Å—É —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –∑–≤—É–∫—É</li>
                    <li>–û–Ω–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–≤—É–∫–æ–≤–∏—Ö —á–∞—Å—Ç–æ—Ç: <a href="https://splaudio.com.ua/ua/services/tongenerator/" target="_blank" class="tool-link">üîó –í—ñ–¥–∫—Ä–∏—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</a></li>
                </ul>
            </div>

            <!-- –¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ -->
            <div class="section">
                <h2>üìö –¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ</h2>
                
                <div class="theory-box">
                    <p><strong>–¶–∏—Ñ—Ä–æ–≤–∏–π –∑–∞–ø–∏—Å –∑–≤—É–∫—É</strong> ‚Äì —Ü–µ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–Ω–∞—á–µ–Ω—å –∞–º–ø–ª—ñ—Ç—É–¥–∏ –∑–≤—É–∫–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É, –∑–∞–ø–∏—Å–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ —Ä—ñ–≤–Ω—ñ –ø—Ä–æ–º—ñ–∂–∫–∏ —á–∞—Å—É. –ó–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º –æ—Å—Ü–∏–ª–æ–≥—Ä–∞–º–∏ –º–æ–∂–Ω–∞ –≤–∏–∑–Ω–∞—á–∏—Ç–∏:</p>
                    
                    <h3>1. –ì—É—á–Ω—ñ—Å—Ç—å –∑–≤—É–∫—É</h3>
                    <p>–í–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è <span class="highlight">–∞–º–ø–ª—ñ—Ç—É–¥–æ—é A</span> –∑–≤—É–∫–æ–≤–æ—ó —Ö–≤–∏–ª—ñ ‚Äì –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–º –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è–º –≤—ñ–¥ –ø–æ–ª–æ–∂–µ–Ω–Ω—è —Ä—ñ–≤–Ω–æ–≤–∞–≥–∏.</p>
                    
                    <h3>2. –¢–æ–Ω –∑–≤—É–∫—É (–≤–∏—Å–æ—Ç–∞)</h3>
                    <p>–í–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è <span class="highlight">—á–∞—Å—Ç–æ—Ç–æ—é ŒΩ</span> (–∞–±–æ –ø–µ—Ä—ñ–æ–¥–æ–º T) –∑–≤—É–∫–æ–≤–æ—ó —Ö–≤–∏–ª—ñ.</p>
                    
                    <div class="formula">
                        ŒΩ = N / t<br>
                        <small>–¥–µ N ‚Äì –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–ª–∏–≤–∞–Ω—å, t ‚Äì —á–∞—Å —É —Å–µ–∫—É–Ω–¥–∞—Ö</small>
                    </div>
                    
                    <div class="info-box">
                        <strong>–ü—Ä–∏–∫–ª–∞–¥:</strong> –Ø–∫—â–æ –∑–∞ 10 –º—Å –≤—ñ–¥–±—É–ª–æ—Å—è 8,8 –∫–æ–ª–∏–≤–∞–Ω—å, —Ç–æ —á–∞—Å—Ç–æ—Ç–∞:<br>
                        ŒΩ = 8,8 / 0,01 —Å = 880 –ì—Ü (–Ω–æ—Ç–∞ "–ª—è" –¥—Ä—É–≥–æ—ó –æ–∫—Ç–∞–≤–∏)
                    </div>
                </div>

                <h3>–¢–∞–±–ª–∏—Ü—è —á–∞—Å—Ç–æ—Ç –º—É–∑–∏—á–Ω–∏—Ö –Ω–æ—Ç</h3>
                <table class="note-table">
                    <thead>
                        <tr>
                            <th>–ù–æ—Ç–∞</th>
                            <th>–ü–µ—Ä—à–∞ –æ–∫—Ç–∞–≤–∞ (–ì—Ü)</th>
                            <th>–î—Ä—É–≥–∞ –æ–∫—Ç–∞–≤–∞ (–ì—Ü)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>–î–æ (C)</td><td>261,63</td><td>523,26</td></tr>
                        <tr><td>–†–µ (D)</td><td>293,66</td><td>587,32</td></tr>
                        <tr><td>–ú—ñ (E)</td><td>329,63</td><td>659,26</td></tr>
                        <tr><td>–§–∞ (F)</td><td>349,23</td><td>698,46</td></tr>
                        <tr><td>–°–æ–ª—å (G)</td><td>392,00</td><td>784,00</td></tr>
                        <tr><td>–õ—è (A)</td><td>440,00</td><td>880,00</td></tr>
                        <tr><td>–°—ñ (B)</td><td>493,88</td><td>987,76</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- –û—Å—Ü–∏–ª–æ–≥—Ä–∞—Ñ -->
            <div class="section">
                <h2>üéµ –í—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–π –æ—Å—Ü–∏–ª–æ–≥—Ä–∞—Ñ</h2>
                
                <div class="oscilloscope-section">
                    <div class="canvas-wrapper">
                        <canvas id="oscilloscope"></canvas>
                        <div class="time-scale" id="timeScale"></div>
                        <div class="scrollbar-container" id="scrollbarContainer" style="display: none;">
                            <input type="range" id="horizontalScrollbar" class="custom-scrollbar" min="0" max="100" value="0" step="0.1">
                        </div>
                    </div>
                    
                    <div class="controls">
                        <button id="startBtn" class="btn-primary">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–∫—Ä–æ—Ñ–æ–Ω</button>
                        <button id="stopBtn" class="btn-danger" disabled>‚èπ –ó—É–ø–∏–Ω–∏—Ç–∏</button>
                        <button id="recordBtn" class="btn-success" disabled>‚è∫ –ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å</button>
                        <button id="stopRecordBtn" class="btn-danger" disabled>‚èπ –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–∞–ø–∏—Å</button>
                        <button id="clearBtn" class="btn-secondary" disabled>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
                    </div>

                    <div class="zoom-controls" id="zoomControls" style="display: none;">
                        <button id="zoomOutBtn" class="btn-secondary">‚àí</button>
                        <input type="range" id="zoomSlider" class="zoom-slider" min="1" max="50" value="1" step="0.5">
                        <button id="zoomInBtn" class="btn-secondary">+</button>
                        <span style="color: #00ff88; font-size: 14px;">–ú–∞—Å—à—Ç–∞–±: <span id="zoomLevel">1x</span></span>
                    </div>

                    <div style="text-align: center; margin: 10px 0;">
                        <button id="scrollLeftBtn" class="btn-secondary" style="display: none;">‚óÑ</button>
                        <button id="scrollHomeBtn" class="btn-secondary" style="display: none;">‚åÇ –ü–æ—á–∞—Ç–æ–∫</button>
                        <button id="scrollRightBtn" class="btn-secondary" style="display: none;">‚ñ∫</button>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <div style="color: white; text-align: center;">
                            <span class="status inactive" id="status">–ù–µ –∞–∫—Ç–∏–≤–Ω–æ</span>
                            <span id="recordingStatus"></span>
                        </div>
                        <div id="measurements" class="measurements" style="display: none;"></div>
                        <p style="color: #00ff88; text-align: center; margin-top: 10px; font-size: 14px;">
                            üí° –ü—ñ–¥–∫–∞–∑–∫–∞: –ö–ª–∞—Ü–Ω—ñ—Ç—å –¥–≤—ñ—á—ñ –Ω–∞ –æ—Å—Ü–∏–ª–æ–≥—Ä–∞–º—ñ –ø—ñ—Å–ª—è –∑–∞–ø–∏—Å—É, —â–æ–± –≤–∏–º—ñ—Ä—è—Ç–∏ –ø–µ—Ä—ñ–æ–¥ –∫–æ–ª–∏–≤–∞–Ω—å
                        </p>
                    </div>
                </div>
            </div>

            <!-- –•—ñ–¥ —Ä–æ–±–æ—Ç–∏ -->
            <div class="section">
                <h2>üî¨ –•—ñ–¥ —Ä–æ–±–æ—Ç–∏</h2>
                
                <h3>–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É:</h3>
                <ol class="instruction-list">
                    <li>–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–≤—É–∫–æ–≤–∏—Ö —á–∞—Å—Ç–æ—Ç: <a href="https://splaudio.com.ua/ua/services/tongenerator/" target="_blank" class="tool-link">splaudio.com.ua</a></li>
                    <li>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–∫—Ä–æ—Ñ–æ–Ω" —É –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –æ—Å—Ü–∏–ª–æ–≥—Ä–∞—Ñ—ñ –≤–∏—â–µ</li>
                    <li>–î–æ–∑–≤–æ–ª—å—Ç–µ –±—Ä–∞—É–∑–µ—Ä—É –¥–æ—Å—Ç—É–ø –¥–æ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞</li>
                </ol>

                <h3>–í–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–æ—Å–ª—ñ–¥—ñ–≤:</h3>
                <ol class="instruction-list">
                    <li><strong>–î–æ—Å–ª—ñ–¥ 1:</strong> –ù–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ñ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —á–∞—Å—Ç–æ—Ç—É 440 –ì—Ü (–Ω–æ—Ç–∞ "–ª—è"). –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "‚è∫ –ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å", —É–≤—ñ–º–∫–Ω—ñ—Ç—å –∑–≤—É–∫ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ñ –Ω–∞ 4-6 —Å–µ–∫—É–Ω–¥, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "‚èπ –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–∞–ø–∏—Å".</li>
                    
                    <li><strong>–î–æ—Å–ª—ñ–¥ 2:</strong> –û—á–∏—Å—Ç—ñ—Ç—å –∑–∞–ø–∏—Å. –ó–±—ñ–ª—å—à—Ç–µ –≥—É—á–Ω—ñ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ (–Ω–µ –∑–º—ñ–Ω—é—é—á–∏ —á–∞—Å—Ç–æ—Ç—É 440 –ì—Ü) —ñ –ø–æ–≤—Ç–æ—Ä—ñ—Ç—å –∑–∞–ø–∏—Å.</li>
                    
                    <li><strong>–î–æ—Å–ª—ñ–¥ 3:</strong> –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —á–∞—Å—Ç–æ—Ç—É 880 –ì—Ü –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ñ. –ó–∞–ø–∏—à—ñ—Ç—å –∑–≤—É–∫.</li>
                    
                    <li><strong>–î–æ—Å–ª—ñ–¥ 4:</strong> –ó–∞–ø–∏—à—ñ—Ç—å –∑–≤—É–∫ –∫–∞–º–µ—Ä—Ç–æ–Ω–∞ (—è–∫—â–æ —î) –∞–±–æ —ñ–Ω—à–æ–≥–æ –¥–∂–µ—Ä–µ–ª–∞ –∑–≤—É–∫—É.</li>
                    
                    <li><strong>–î–æ—Å–ª—ñ–¥ 5:</strong> –ü—Ä–æ—Å–ø—ñ–≤–∞–π—Ç–µ –≤ –º—ñ–∫—Ä–æ—Ñ–æ–Ω –∫—ñ–ª—å–∫–∞ –Ω–æ—Ç. –ó–∞–ø–∏—Å—É–π—Ç–µ –∫–æ–∂–Ω—É –Ω–æ—Ç—É –æ–∫—Ä–µ–º–æ.</li>
                </ol>

                <div class="info-box">
                    <strong>‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:</strong> –ü—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏. –ö–ª–∞—Ü–Ω—ñ—Ç—å –¥–≤—ñ—á—ñ –Ω–∞ –¥–≤–æ—Ö —Å—É—Å—ñ–¥–Ω—ñ—Ö –ø—ñ–∫–∞—Ö —Ö–≤–∏–ª—ñ, —â–æ–± –≤–∏–º—ñ—Ä—è—Ç–∏ –ø–µ—Ä—ñ–æ–¥ —ñ —á–∞—Å—Ç–æ—Ç—É.
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
            <div class="section">
                <h2>üìä –¢–∞–±–ª–∏—Ü—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤</h2>
                
                <table class="experiment-table">
                    <thead>
                        <tr>
                            <th>‚Ññ</th>
                            <th>–ù–∞–∑–≤–∞ –¥–æ—Å–ª—ñ–¥—É</th>
                            <th>–ß–∞—Å –∫–æ–ª–∏–≤–∞–Ω—å t, –º—Å</th>
                            <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–ª–∏–≤–∞–Ω—å N</th>
                            <th>–ß–∞—Å—Ç–æ—Ç–∞ ŒΩ, –ì—Ü</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td><input id="exp_fr_1_1" type="text" placeholder="440 –ì—Ü, –Ω–æ—Ä–º–∞–ª—å–Ω–∞ –≥—É—á–Ω—ñ—Å—Ç—å"></td>
                            <td><input id="exp_fr_1_2" type="number" step="0.001"></td>
                            <td><input id="exp_fr_1_3" type="number" step="0.1"></td>
                            <td><input id="exp_fr_1_4" type="number" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td><input id="exp_fr_2_1" type="text" placeholder="440 –ì—Ü, –ø—ñ–¥–≤–∏—â–µ–Ω–∞ –≥—É—á–Ω—ñ—Å—Ç—å"></td>
                            <td><input id="exp_fr_2_2" type="number" step="0.001"></td>
                            <td><input id="exp_fr_2_3" type="number" step="0.1"></td>
                            <td><input id="exp_fr_2_4" type="number" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td><input id="exp_fr_3_1" type="text" placeholder="880 –ì—Ü"></td>
                            <td><input id="exp_fr_3_2" type="number" step="0.001"></td>
                            <td><input id="exp_fr_3_3" type="number" step="0.1"></td>
                            <td><input id="exp_fr_3_4" type="number" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td><input id="exp_fr_4_1" type="text" placeholder="–ö–∞–º–µ—Ä—Ç–æ–Ω / —ñ–Ω—à–µ –¥–∂–µ—Ä–µ–ª–æ"></td>
                            <td><input id="exp_fr_4_2" type="number" step="0.001"></td>
                            <td><input id="exp_fr_4_3" type="number" step="0.1"></td>
                            <td><input id="exp_fr_4_4" type="number" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td><input id="exp_fr_5_1" type="text" placeholder="–°–ø—ñ–≤ (–≤–∫–∞–∂—ñ—Ç—å –Ω–æ—Ç—É)"></td>
                            <td><input id="exp_fr_5_2" type="number" step="0.001"></td>
                            <td><input id="exp_fr_5_3" type="number" step="0.1"></td>
                            <td><input id="exp_fr_5_4" type="number" step="0.01"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- –í–∏—Å–Ω–æ–≤–∫–∏ -->
            <div class="section">
                <h2>üìù –í–∏—Å–Ω–æ–≤–æ–∫</h2>
                
                <div class="theory-box">
                    <h3>–£ –≤–∏—Å–Ω–æ–≤–∫—É –∑–∞–∑–Ω–∞—á—Ç–µ:</h3>
                    <ol class="instruction-list">
                        <li>–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –≤–∏–º—ñ—Ä—è–Ω—ñ —á–∞—Å—Ç–æ—Ç–∏ —ñ–∑ –∑–∞–¥–∞–Ω–∏–º–∏ —á–∞—Å—Ç–æ—Ç–∞–º–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Ç–∞ —Ç–∞–±–ª–∏—á–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏</li>
                        <li>–Ø–∫ –∑–º—ñ–Ω–∏–ª–∞—Å—è –æ—Å—Ü–∏–ª–æ–≥—Ä–∞–º–∞ –ø—Ä–∏ –∑–±—ñ–ª—å—à–µ–Ω–Ω—ñ –≥—É—á–Ω–æ—Å—Ç—ñ (–¥–æ—Å–ª—ñ–¥ 1 vs –¥–æ—Å–ª—ñ–¥ 2)?</li>
                        <li>–Ø–∫ –≤—ñ–¥—Ä—ñ–∑–Ω—è—é—Ç—å—Å—è –æ—Å—Ü–∏–ª–æ–≥—Ä–∞–º–∏ –∑–≤—É–∫—ñ–≤ —Ä—ñ–∑–Ω–æ—ó —á–∞—Å—Ç–æ—Ç–∏?</li>
                        <li>–Ø–∫—ñ –ø—Ä–∏—á–∏–Ω–∏ –º–æ–∂–ª–∏–≤–æ—ó —Ä–æ–∑–±—ñ–∂–Ω–æ—Å—Ç—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (—à—É–º–∏, –Ω–µ—Ç–æ—á–Ω—ñ—Å—Ç—å –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —Ç–æ—â–æ)?</li>
                    </ol>
                    
                    <textarea style="width: 100%; min-height: 150px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; margin-top: 10px;" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à –≤–∏—Å–Ω–æ–≤–æ–∫ —Ç—É—Ç..."></textarea>
                </div>
            </div>

            <!-- –ó–∞–≤–¥–∞–Ω–Ω—è —ñ–∑ –∑—ñ—Ä–æ—á–∫–æ—é -->
            <div class="section">
                <h2>‚≠ê –ó–∞–≤–¥–∞–Ω–Ω—è ¬´—ñ–∑ –∑—ñ—Ä–æ—á–∫–æ—é¬ª</h2>
                
                <div class="theory-box">
                    <p>–û—Ü—ñ–Ω—ñ—Ç—å –≤—ñ–¥–Ω–æ—Å–Ω—É –ø–æ—Ö–∏–±–∫—É –æ–¥–Ω–æ–≥–æ –∑ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤ –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é:</p>
                    
                    <div class="formula">
                        Œµ = |1 - ŒΩ<sub>–≤–∏–º—ñ—Ä—è–Ω–∞</sub> / ŒΩ<sub>–∑–∞–¥–∞–Ω–∞</sub>| √ó 100%
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <label>ŒΩ<sub>–∑–∞–¥–∞–Ω–∞</sub> (–ì—Ü): <input type="number" id="targetFreq" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;"></label>
                    </div>
                    <div style="margin: 15px 0;">
                        <label>ŒΩ<sub>–≤–∏–º—ñ—Ä—è–Ω–∞</sub> (–ì—Ü): <input type="number" id="measuredFreq" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;"></label>
                    </div>
                    <button onclick="calculateError()" class="btn-primary">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –ø–æ—Ö–∏–±–∫—É</button>
                    <div id="errorResult" style="margin-top: 15px; font-size: 1.2em; font-weight: bold;"></div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ -->
            <div class="submit_block">
                <button id="submit_button">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('oscilloscope');
        const ctx = canvas.getContext('2d');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const recordBtn = document.getElementById('recordBtn');
        const stopRecordBtn = document.getElementById('stopRecordBtn');
        const clearBtn = document.getElementById('clearBtn');
        const statusEl = document.getElementById('status');
        const recordingStatusEl = document.getElementById('recordingStatus');
        const timeScaleEl = document.getElementById('timeScale');
        const measurementsEl = document.getElementById('measurements');
        const zoomControls = document.getElementById('zoomControls');
        const zoomSlider = document.getElementById('zoomSlider');
        const zoomLevelEl = document.getElementById('zoomLevel');
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const scrollLeftBtn = document.getElementById('scrollLeftBtn');
        const scrollRightBtn = document.getElementById('scrollRightBtn');
        const scrollHomeBtn = document.getElementById('scrollHomeBtn');
        const horizontalScrollbar = document.getElementById('horizontalScrollbar');
        const scrollbarContainer = document.getElementById('scrollbarContainer');

        let audioContext;
        let analyser;
        let microphone;
        let dataArray;
        let bufferLength;
        let animationId;
        let isRecording = false;
        let recordedData = [];
        let recordStartTime;
        let sampleRate;
        let viewMode = 'live';
        let zoomLevel = 1;
        let scrollPosition = 0;
        let clickMarkers = [];

        canvas.width = canvas.offsetWidth * 2;
        canvas.height = canvas.offsetHeight * 2;
        ctx.scale(2, 2);

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = (seconds % 60).toFixed(3);
            return `${mins}:${secs.padStart(6, '0')}`;
        }

        function updateTimeScale(duration, samplesPerPixel) {
            if (viewMode === 'live') {
                timeScaleEl.innerHTML = '<span>–†–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É</span>';
                return;
            }

            const displayWidth = canvas.offsetWidth;
            const numMarkers = 10;
            let html = '';
            
            for (let i = 0; i <= numMarkers; i++) {
                const pixelPos = (displayWidth / numMarkers) * i;
                const samplePos = scrollPosition + (pixelPos * samplesPerPixel * zoomLevel);
                const timeInSeconds = samplePos / sampleRate;
                html += `<span>${formatTime(timeInSeconds)}</span>`;
            }
            
            timeScaleEl.innerHTML = html;
        }

        function draw() {
            const displayWidth = canvas.offsetWidth;
            const displayHeight = canvas.offsetHeight;

            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, displayWidth, displayHeight);

            ctx.strokeStyle = '#2d2d44';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 4; i++) {
                const y = (displayHeight / 4) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(displayWidth, y);
                ctx.stroke();
            }
            
            for (let i = 0; i <= 8; i++) {
                const x = (displayWidth / 8) * i;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, displayHeight);
                ctx.stroke();
            }

            ctx.lineWidth = 2.5;
            ctx.strokeStyle = '#00ff88';
            ctx.shadowBlur = 8;
            ctx.shadowColor = '#00ff88';

            ctx.beginPath();

            if (viewMode === 'live') {
                analyser.getByteTimeDomainData(dataArray);
                
                const sliceWidth = displayWidth / bufferLength;
                let x = 0;

                for (let i = 0; i < bufferLength; i++) {
                    const v = dataArray[i] / 128.0;
                    const y = (v * displayHeight) / 2;

                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    x += sliceWidth;
                }
            } else {
                const samplesPerPixel = zoomLevel;
                const startSample = Math.floor(scrollPosition);
                const endSample = Math.min(startSample + displayWidth * samplesPerPixel, recordedData.length);
                
                for (let i = 0; i < displayWidth; i++) {
                    const sampleIndex = Math.floor(startSample + i * samplesPerPixel);
                    if (sampleIndex >= recordedData.length) break;
                    
                    const v = recordedData[sampleIndex] / 128.0;
                    const y = (v * displayHeight) / 2;
                    const x = i;

                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }

                updateTimeScale((endSample - startSample) / sampleRate, samplesPerPixel);
            }

            ctx.lineTo(displayWidth, displayHeight / 2);
            ctx.stroke();
            ctx.shadowBlur = 0;

            if (clickMarkers.length > 0 && viewMode === 'playback') {
                ctx.strokeStyle = '#ff0088';
                ctx.lineWidth = 2;
                
                for (let marker of clickMarkers) {
                    const x = (marker - scrollPosition) / zoomLevel;
                    if (x >= 0 && x <= displayWidth) {
                        ctx.beginPath();
                        ctx.moveTo(x, 0);
                        ctx.lineTo(x, displayHeight);
                        ctx.stroke();
                    }
                }

                if (clickMarkers.length === 2) {
                    const distance = Math.abs(clickMarkers[1] - clickMarkers[0]);
                    const timeDistance = distance / sampleRate;
                    const frequency = timeDistance > 0 ? 1 / timeDistance : 0;
                    
                    measurementsEl.style.display = 'block';
                    measurementsEl.innerHTML = `
                        üìè –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è:<br>
                        Œît = ${(timeDistance * 1000).toFixed(3)} –º—Å<br>
                        –ß–∞—Å—Ç–æ—Ç–∞ = ${frequency.toFixed(2)} –ì—Ü (–ø–µ—Ä—ñ–æ–¥: ${(timeDistance * 1000).toFixed(3)} –º—Å)<br>
                        –í—ñ–¥—Å—Ç–∞–Ω—å: ${distance.toFixed(0)} —Å–µ–º–ø–ª—ñ–≤
                    `;
                }
            }

            if (viewMode === 'live') {
                animationId = requestAnimationFrame(draw);
            }
        }

        async function startOscilloscope() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });

                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                microphone = audioContext.createMediaStreamSource(stream);
                sampleRate = audioContext.sampleRate;

                analyser.fftSize = 2048;
                bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);

                microphone.connect(analyser);

                viewMode = 'live';
                draw();

                startBtn.disabled = true;
                stopBtn.disabled = false;
                recordBtn.disabled = false;
                statusEl.textContent = '–ê–∫—Ç–∏–≤–Ω–æ';
                statusEl.className = 'status active';

            } catch (err) {
                alert('–ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞: ' + err.message);
                console.error('–ü–æ–º–∏–ª–∫–∞:', err);
            }
        }

        function stopOscilloscope() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }

            if (isRecording) {
                stopRecording();
            }

            if (microphone) {
                microphone.disconnect();
                microphone.mediaStream.getTracks().forEach(track => track.stop());
            }

            if (audioContext) {
                audioContext.close();
            }

            if (recordedData.length === 0) {
                ctx.fillStyle = '#1a1a2e';
                ctx.fillRect(0, 0, canvas.offsetWidth, canvas.offsetHeight);
            }

            startBtn.disabled = false;
            stopBtn.disabled = true;
            recordBtn.disabled = true;
            statusEl.textContent = '–ù–µ –∞–∫—Ç–∏–≤–Ω–æ';
            statusEl.className = 'status inactive';
        }

        async function startRecording() {
            isRecording = true;
            recordedData = [];
            recordStartTime = Date.now();

            recordBtn.disabled = true;
            stopRecordBtn.disabled = false;
            recordingStatusEl.innerHTML = '<span class="status recording">‚è∫ –ó–∞–ø–∏—Å...</span>';

            function captureData() {
                if (!isRecording) return;
                
                const tempArray = new Uint8Array(bufferLength);
                analyser.getByteTimeDomainData(tempArray);
                recordedData.push(...tempArray);
                
                setTimeout(captureData, 10);
            }
            captureData();
        }

        function stopRecording() {
            isRecording = false;
            stopRecordBtn.disabled = true;
            recordBtn.disabled = false;
            recordingStatusEl.innerHTML = `<span class="status active">‚úì –ó–∞–ø–∏—Å–∞–Ω–æ ${(recordedData.length / sampleRate).toFixed(2)} —Å–µ–∫</span>`;
            
            clearBtn.disabled = false;
            viewMode = 'playback';
            zoomControls.style.display = 'flex';
            scrollLeftBtn.style.display = 'inline-block';
            scrollRightBtn.style.display = 'inline-block';
            scrollHomeBtn.style.display = 'inline-block';
            scrollbarContainer.style.display = 'block';
            
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            updateScrollbar();
            draw();
        }

        function clearRecording() {
            recordedData = [];
            clickMarkers = [];
            scrollPosition = 0;
            zoomLevel = 1;
            zoomSlider.value = 1;
            zoomLevelEl.textContent = '1x';
            recordingStatusEl.innerHTML = '';
            measurementsEl.style.display = 'none';
            clearBtn.disabled = true;
            zoomControls.style.display = 'none';
            scrollLeftBtn.style.display = 'none';
            scrollRightBtn.style.display = 'none';
            scrollHomeBtn.style.display = 'none';
            scrollbarContainer.style.display = 'none';
            horizontalScrollbar.value = 0;
            
            if (viewMode === 'playback') {
                ctx.fillStyle = '#1a1a2e';
                ctx.fillRect(0, 0, canvas.offsetWidth, canvas.offsetHeight);
                viewMode = 'live';
                if (!animationId && analyser) {
                    draw();
                }
            }
        }

        function updateZoom() {
            zoomLevel = parseFloat(zoomSlider.value);
            zoomLevelEl.textContent = zoomLevel.toFixed(1) + 'x';
            
            const maxScroll = Math.max(0, recordedData.length - (canvas.offsetWidth * zoomLevel));
            scrollPosition = Math.min(scrollPosition, maxScroll);
            
            updateScrollbar();
            draw();
        }

        function updateScrollbar() {
            if (recordedData.length === 0) return;
            
            const maxScroll = Math.max(0, recordedData.length - (canvas.offsetWidth * zoomLevel));
            
            if (maxScroll > 0) {
                const scrollPercentage = (scrollPosition / maxScroll) * 100;
                horizontalScrollbar.value = scrollPercentage;
            } else {
                horizontalScrollbar.value = 0;
            }
        }

        canvas.addEventListener('click', (e) => {
            if (viewMode !== 'playback' || recordedData.length === 0) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const samplePosition = scrollPosition + (x * zoomLevel);
            
            clickMarkers.push(samplePosition);
            if (clickMarkers.length > 2) {
                clickMarkers.shift();
            }
            
            draw();
        });

        zoomSlider.addEventListener('input', updateZoom);
        zoomInBtn.addEventListener('click', () => {
            zoomSlider.value = Math.min(50, parseFloat(zoomSlider.value) + 1);
            updateZoom();
        });
        zoomOutBtn.addEventListener('click', () => {
            zoomSlider.value = Math.max(1, parseFloat(zoomSlider.value) - 1);
            updateZoom();
        });

        scrollLeftBtn.addEventListener('click', () => {
            scrollPosition = Math.max(0, scrollPosition - canvas.offsetWidth * zoomLevel * 0.5);
            updateScrollbar();
            draw();
        });
        scrollRightBtn.addEventListener('click', () => {
            const maxScroll = Math.max(0, recordedData.length - (canvas.offsetWidth * zoomLevel));
            scrollPosition = Math.min(maxScroll, scrollPosition + canvas.offsetWidth * zoomLevel * 0.5);
            updateScrollbar();
            draw();
        });
        scrollHomeBtn.addEventListener('click', () => {
            scrollPosition = 0;
            updateScrollbar();
            draw();
        });

        horizontalScrollbar.addEventListener('input', () => {
            const maxScroll = Math.max(0, recordedData.length - (canvas.offsetWidth * zoomLevel));
            const scrollPercentage = parseFloat(horizontalScrollbar.value) / 100;
            scrollPosition = scrollPercentage * maxScroll;
            draw();
        });

        startBtn.addEventListener('click', startOscilloscope);
        stopBtn.addEventListener('click', stopOscilloscope);
        recordBtn.addEventListener('click', startRecording);
        stopRecordBtn.addEventListener('click', stopRecording);
        clearBtn.addEventListener('click', clearRecording);

        window.addEventListener('resize', () => {
            canvas.width = canvas.offsetWidth * 2;
            canvas.height = canvas.offsetHeight * 2;
            ctx.scale(2, 2);
            draw();
        });

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ—Ö–∏–±–∫–∏
        function calculateError() {
            const target = parseFloat(document.getElementById('targetFreq').value);
            const measured = parseFloat(document.getElementById('measuredFreq').value);
            const resultEl = document.getElementById('errorResult');
            
            if (isNaN(target) || isNaN(measured) || target === 0) {
                resultEl.innerHTML = '<span style="color: #f5576c;">‚ùå –í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç</span>';
                return;
            }
            
            const error = Math.abs(1 - measured / target) * 100;
            resultEl.innerHTML = `<span style="color: #56ab2f;">‚úì –í—ñ–¥–Ω–æ—Å–Ω–∞ –ø–æ—Ö–∏–±–∫–∞: Œµ = ${error.toFixed(2)}%</span>`;
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        document.getElementById('submit_button').addEventListener('click', async function() {
            const klas = document.getElementById('klas').value.trim();
            const name = document.getElementById('name').value.trim();
            const sheetName = document.getElementById('sheetName').value;

            if (!klas || !name) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –∫–ª–∞—Å —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ/—ñ–º\'—è!');
                return;
            }

            // –ó–±–∏—Ä–∞—î–º–æ –¥–∞–Ω—ñ –∑ —Ç–∞–±–ª–∏—Ü—ñ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤
            const tableData = [];
            const table = document.querySelector('.experiment-table tbody');
            const rows = table.querySelectorAll('tr');
            
            rows.forEach((row, index) => {
                const inputs = row.querySelectorAll('input');
                tableData.push({
                    '–ù–æ–º–µ—Ä': index + 1,
                    '–ù–∞–∑–≤–∞ –¥–æ—Å–ª—ñ–¥—É': inputs[0].value || '',
                    '–ß–∞—Å –∫–æ–ª–∏–≤–∞–Ω—å (–º—Å)': inputs[1].value || '',
                    '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–ª–∏–≤–∞–Ω—å': inputs[2].value || '',
                    '–ß–∞—Å—Ç–æ—Ç–∞ (–ì—Ü)': inputs[3].value || ''
                });
            });

            // –ó–±–∏—Ä–∞—î–º–æ –≤–∏—Å–Ω–æ–≤–æ–∫
            const conclusion = document.querySelector('textarea').value || '';

            // –ó–±–∏—Ä–∞—î–º–æ –¥–∞–Ω—ñ –ø–æ—Ö–∏–±–∫–∏
            const targetFreq = document.getElementById('targetFreq').value || '';
            const measuredFreq = document.getElementById('measuredFreq').value || '';
            const errorCalc = document.getElementById('errorResult').textContent || '';

            // –§–æ—Ä–º—É—î–º–æ –æ–±'—î–∫—Ç –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
            const data = {
                sheetName: sheetName,
                studentInfo: {
                    '–ö–ª–∞—Å': klas,
                    '–ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ —ñ–º\'—è': name,
                    '–î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è': new Date().toLocaleString('uk-UA')
                },
                experiments: tableData,
                analysis: {
                    '–í–∏—Å–Ω–æ–≤–æ–∫': conclusion,
                    '–ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–¥–∞–Ω–∞ (–ì—Ü)': targetFreq,
                    '–ß–∞—Å—Ç–æ—Ç–∞ –≤–∏–º—ñ—Ä—è–Ω–∞ (–ì—Ü)': measuredFreq,
                    '–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ—Ö–∏–±–∫–∏': errorCalc
                }
            };

            try {
                // –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä Google Apps Script
                const response = await fetch('https://script.google.com/macros/s/AKfycbxMa02J8zAwQ6fsCE2yQVWTn65jL-cUYP0RxOOUcA0b7Ym8x-0ZSHbBDj9OC_MU6Nxl/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                alert('‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —É—Å–ø—ñ—à–Ω–æ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!\n\n–î—è–∫—É—î–º–æ –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.');
                
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏:', error);
                alert('‚ùå –í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ –¥–∞–Ω–∏—Ö.\n–°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ –∞–±–æ –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –≤—á–∏—Ç–µ–ª—è.');
            }
        });
    </script>
</body>
</html>